<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Millionaire Quiz Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Palatino+Linotype&display=swap');

    body {
      font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
      background-color: #f0f0f0;
      color: #000;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }

    .container {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2em;
    }

    .question-box {
      background: #ffffffee;
      border-radius: 12px;
      box-shadow: 0 0 10px #aaa;
      padding: 2em;
      max-width: 700px;
      width: 100%;
      margin-bottom: 2em;
      text-align: center;
      
    }

    #question-text {
      margin-bottom: 1.2em;
      font-size: 1.25rem;
      font-weight: 600;
    }

    .answers {
      display: flex;
      flex-direction: column;
      gap: 1em;
    }

    .answers button {
      position: relative;
      background-color: #dceeff;
      border: 2px solid #b0d0f0;
      border-radius: 10px;
      padding: 1em;
      font-size: 1rem;
      font-family: inherit;
      text-align: left;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      overflow: hidden; /* to clip the fill bar */
    }
    
    .answers button .fill-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background-color: rgba(42, 118, 255, 0.3); /* light blue, semi-transparent */
      width: 0;
      transition: width 1s ease;
      pointer-events: none;
      z-index: 0;
    }
    
    .answers button span.answer-text {
      position: relative;
      z-index: 1;
    }


    .answers button:hover {
      background-color: #c7e5ff;
      transform: scale(1.02);
    }

    .answers button.selected {
      background-color: #b8dbff;
      border-color: #7abaff;
    }

    .answers button.hidden {
      display: none;
    }

    #check-answer-btn {
      margin-top: 1.5em;
      padding: 0.8em 2em;
      font-size: 1.1rem;
      background-color: #0077ff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s;
    }

    #check-answer-btn:hover {
      background-color: #005fcc;
    }

    .hint {
      margin-top: 1em;
      padding: 1em;
      background-color: #eee;
      border-radius: 10px;
      font-style: italic;
      display: none;
    }

    .lifelines {
      position: fixed;
      top: 50%;
      left: 1em;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 1.5em;
      z-index: 20;
    }

    .lifelines button {
      background-color: gold;
      border: none;
      border-radius: 10px;
      padding: 0.6em 1em;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 0 8px #ffd70088;
      transition: background 0.3s, transform 0.2s;
    }

    .lifelines button:hover:not(:disabled) {
      background-color: #ffd700;
      transform: scale(1.05);
    }

    .lifelines button:disabled {
      background: gray;
      cursor: not-allowed;
      color: #444;
      box-shadow: none;
    }
    
    .lifeline-item[disabled] img {
      filter: grayscale(100%) brightness(60%);
      cursor: not-allowed;
      pointer-events: none;
    }


    #give-up-btn {
      margin-top: 1em;
      padding: 0.6em 1.5em;
      background: #ddd;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    #give-up-btn:hover {
      background-color: #ccc;
    }

    .tracker {
      display: flex;
      justify-content: center;
      gap: 0.6em;
      padding: 1em 0;
      background: #e0e0e0;
      border-top: 2px solid #ccc;
    }
    
    .tracker div {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background-color: #bbb;
      color: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-family: 'Palatino Linotype', serif;
      font-size: 1.1rem;
      transition: background-color 0.3s;
      user-select: none;
    }
    
    .tracker div.correct {
      background-color: #2a76ff; /* blue for correct */
      color: #fff;
    }


    .start-screen,
    .result-screen {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 2em;
      z-index: 10;
    }
    
    .lifeline-item[disabled] {
      pointer-events: none;
      opacity: 0.6;
    }

    .start-screen h1,
    .result-screen h2 {
      font-size: 3rem;
      font-weight: 900;
      color: #ffd700;
      margin-bottom: 1em;
    }

    .start-screen button,
    .result-screen button {
      padding: 1em 2em;
      font-size: 1.2em;
      background: linear-gradient(45deg, #ff6a00, #ee0979);
      border: none;
      border-radius: 12px;
      color: white;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .lifeline-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      user-select: none;
    }
    
    .lifeline-item img {
      height: 60px;
      transition: transform 0.2s, filter 0.3s;
    }
    
    .lifeline-item:hover img:not([disabled]) {
      transform: scale(1.1);
      filter: drop-shadow(0 0 5px #00aaff);
    }
    
    .lifeline-item[disabled] img {
      filter: grayscale(100%) brightness(60%);
      cursor: not-allowed;
      pointer-events: none;
    }
    
    .lifeline-label {
      margin-top: 0.3em;
      font-family: 'Palatino Linotype', serif;
      font-size: 0.9rem;
      color: #333;
      text-align: center;
      pointer-events: none; /* so text doesn’t block clicks */
      user-select: none;
    }


    .start-screen button:hover,
    .result-screen button:hover {
      transform: scale(1.1);
    }
  </style>
</head>
<body>
  <div class="start-screen" id="start-screen">
    <h1>Who Wants to Be a Millionaire?</h1>
    <button onclick="startGame()">Start Game</button>
  </div>

  <div class="container" id="quiz-container" style="display: none;">
    <div class="lifelines">
      <div class="lifeline-item" onclick="useFiftyFifty()">
        <img id="fifty-btn" src="https://assets.iflscience.com/assets/articleNo/71047/aImg/71241/coin-toss-meta.png" alt="50/50 Lifeline" title="50/50 Lifeline" />
        <div class="lifeline-label">50/50</div>
      </div>
      <div class="lifeline-item" onclick="askAudience()">
        <img id="audience-btn" src="https://cdn.sanity.io/images/7i1ps9pf/production/84c9406f1c438f37fbd6cc07730cd6c43b159b63-5644x3763.jpg" alt="Ask the Audience" title="Ask the Audience" />
        <div class="lifeline-label">Ask the Procters</div>
      </div>
      <div class="lifeline-item" onclick="phoneFriend()">
        <img id="phone-btn" src="https://media.istockphoto.com/id/1325458178/photo/whispering-the-right-answer.jpg?s=612x612&w=0&k=20&c=ktxzDRGE92e82T34yfjRU7GG8W6DAJA5hZyji8Pn3yg=" alt="Phone a Friend" title="Phone a Friend" />
        <div class="lifeline-label">Whisper to a Freind</div>
      </div>
    </div>


    <div class="question-box">
      <div id="question-text">Question appears here...</div>
      <div class="answers" id="answer-buttons">
        <button onclick="selectAnswer(this)">Answer A</button>
        <button onclick="selectAnswer(this)">Answer B</button>
        <button onclick="selectAnswer(this)">Answer C</button>
        <button onclick="selectAnswer(this)">Answer D</button>
      </div>
      <button id="check-answer-btn" onclick="checkAnswer()">Check Answer</button>
      <div class="hint" id="hint-box">Hint appears here</div>
      
    </div>
  </div>

  <div class="result-screen" id="result-screen" style="display: none;">
    <h2>Game Over!</h2>
    <p id="final-score-text"></p>
    <button onclick="restartGame()">Play Again</button>
  </div>

  <div class="tracker" id="progress-tracker"></div>

  <script>
    const questions = [
      {
        text: "What is the integral of x dx?",
        answers: ["1/2 x^2 + C", "x + C", "ln|x| + C", "x^2 + C"],
        correct: "1/2 x^2 + C",
        hint: "Use power rule of integration."
      },
      {
        text: "What is ∫cos(x) dx?",
        answers: ["sin(x) + C", "-cos(x) + C", "-sin(x) + C", "cos(x) + C"],
        correct: "sin(x) + C",
        hint: "Derivative of sin(x) is cos(x)."
      },
      {
        text: "∫1/x dx equals...",
        answers: ["ln|x| + C", "x ln|x| - x + C", "1/(x^2) + C", "x^2/2 + C"],
        correct: "ln|x| + C",
        hint: "Think of the natural logarithm."
      },
      {
        text: "Which of these is an antiderivative of e^x?",
        answers: ["e^x + C", "x * e^x + C", "ln(x) + C", "1/e^x + C"],
        correct: "e^x + C",
        hint: "Derivative of e^x is e^x."
      },
      {
        text: "∫sec^2(x) dx equals...",
        answers: ["tan(x) + C", "sec(x)tan(x) + C", "sin(x) + C", "ln|cos(x)| + C"],
        correct: "tan(x) + C",
        hint: "What function's derivative is sec²(x)?"
      }
    ];

    let currentQuestion = 0;
    let selectedButton = null;
    let correctAnswers = 0;

    function startGame() {
      document.getElementById("start-screen").style.display = "none";
      document.getElementById("quiz-container").style.display = "flex";
      document.getElementById("result-screen").style.display = "none";
      currentQuestion = 0;
      correctAnswers = 0;
      selectedButton = null;

      createTracker();
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentQuestion];
      document.getElementById("question-text").innerText = q.text;
      const buttons = document.querySelectorAll("#answer-buttons button");
    
      buttons.forEach((btn, index) => {
        btn.classList.remove("selected", "hidden");
        btn.disabled = false;
        // Reset fill bar width:
        let fillBar = btn.querySelector(".fill-bar");
        if (!fillBar) {
          fillBar = document.createElement("div");
          fillBar.classList.add("fill-bar");
          btn.prepend(fillBar);
        }
        fillBar.style.width = '0';
    
        // Wrap answer text in span for layering
        btn.innerHTML = `<span class="answer-text">${q.answers[index]}</span>`;
      });
    
      document.getElementById("hint-box").style.display = "none";
      selectedButton = null;
    }


    function selectAnswer(button) {
      const buttons = document.querySelectorAll("#answer-buttons button");
      buttons.forEach(btn => btn.classList.remove("selected"));
      button.classList.add("selected");
      selectedButton = button;
    }

    function checkAnswer() {
      if (!selectedButton) return;
    
      const selectedText = selectedButton.innerText;
      const correctText = questions[currentQuestion].correct;
    
      if (selectedText === correctText) {
        // Add correct class to current question box in tracker
        const trackerBoxes = document.getElementById("progress-tracker").children;
        trackerBoxes[currentQuestion].classList.add("correct");
        correctAnswers++;
      }
    
      currentQuestion++;
      if (currentQuestion < questions.length) {
        showQuestion();
      } else {
        showResult();
      }
    }


    
      

    function showResult() {
      document.getElementById("quiz-container").style.display = "none";
      document.getElementById("result-screen").style.display = "flex";
      document.getElementById("final-score-text").innerText =
        `You answered ${correctAnswers} out of ${questions.length} correctly.`;
    }

    function restartGame() {
      document.getElementById("result-screen").style.display = "none";
      document.getElementById("start-screen").style.display = "flex";
      const tracker = document.getElementById("progress-tracker");
      tracker.innerHTML = "";
    }

    function giveUp() {
      showResult();
    }

    function createTracker() {
      const tracker = document.getElementById("progress-tracker");
      tracker.innerHTML = "";
      for (let i = 0; i < questions.length; i++) {
        const box = document.createElement("div");
        box.classList.add("tracker-box");
        box.innerText = (i + 1); // Number the box 1 to 5
        tracker.appendChild(box);
      }
    }


    function useFiftyFifty() {

      // Disable the 50/50 lifeline button visually and functionally
      const fiftyBtn = document.getElementById("fifty-btn").parentElement;
      fiftyBtn.setAttribute("disabled", true);
    
      // Hide two incorrect answers
      const q = questions[currentQuestion];
      const buttons = Array.from(document.querySelectorAll("#answer-buttons button"));
    
      // Find all incorrect buttons
      const incorrectButtons = buttons.filter(btn => btn.innerText !== q.correct);
    
      // Randomly pick 2 incorrect answers to hide
      let hiddenCount = 0;
      while (hiddenCount < 2 && incorrectButtons.length > 0) {
        // Random index from incorrectButtons array
        const randIndex = Math.floor(Math.random() * incorrectButtons.length);
        const btnToHide = incorrectButtons[randIndex];
        btnToHide.classList.add("hidden");
        btnToHide.disabled = true;
    
        // Remove the hidden button from array so we don't hide it twice
        incorrectButtons.splice(randIndex, 1);
        hiddenCount++;
      }
    }

    function askAudience() {
      const q = questions[currentQuestion];
      const correct = q.correct;
      const buttons = Array.from(document.querySelectorAll("#answer-buttons button"));
    
      // Generate initial random percentages
      let votes = buttons.map(btn => ({
        text: btn.innerText,
        percent: btn.innerText === correct ? getRandomInt(50, 80) : getRandomInt(5, 20)
      }));
    
      // Normalize so total = 100%
      let total = votes.reduce((sum, v) => sum + v.percent, 0);
      votes = votes.map(v => ({...v, percent: Math.round((v.percent / total) * 100)}));
    
      // Animate fill bars smoothly
      votes.forEach((vote, i) => {
        const btn = buttons[i];
        let fillBar = btn.querySelector(".fill-bar");
        if (!fillBar) {
          fillBar = document.createElement("div");
          fillBar.classList.add("fill-bar");
          btn.prepend(fillBar);
        }
        // Reset width first to trigger transition
        fillBar.style.width = '0';
        // Force reflow for transition restart
        void fillBar.offsetWidth;
        // Then set to vote percent
        fillBar.style.width = vote.percent + "%";
      });
    
      // Disable lifeline visually and functionally
      const audienceBtn = document.getElementById("audience-btn").parentElement;
      audienceBtn.setAttribute("disabled", true);
    }

    function phoneFriend() {
      const hint = questions[currentQuestion].hint;
      const hintBox = document.getElementById("hint-box");
      hintBox.innerText = "Jimmy says: " + hint;
      hintBox.style.display = "block";
    
      // Disable lifeline visually and functionally
      const phoneBtn = document.getElementById("phone-btn").parentElement;
      phoneBtn.setAttribute("disabled", true);
    }

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
  </script>
</body>
</html>
